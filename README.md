# Docker Cluster Tutorial

Поднимаем докер-кластер с использованием инструментов HashiCorp, Казань 2018

## Step by Step Guide

### Подготовка

1. Скопируйте к себе этот репозитарий в безопасное место, так как дальше вы будете вставлять разные ключи и секреты.

1. Зарегистрируйте аккаунт в Селектеле/используйте готовый если есть. https://my.selectel.ru/ -> Зарегистрироваться -> Почта, Подтверждение, СМС, PROFIT!

1. Пополните баланс аккаунта/активируйте промокод, чтобы появились деньги на аккаунте приватного облака

1. Заведите новый проект на странице на страние приватного облака - https://my.selectel.ru/vpc/projects

1. Добавьте публичную подсеть в регионе ru-1b, для этого нужно нажать раскрыть панель "Санкт-Петербург" и на вкладке "Ресурсы Дубровка-2 (ru-1b)" нажать кнопку "Добавить Публичную Подсеть"

1. На странице пользователей https://my.selectel.ru/vpc/users добавьте нового пользователя.

1. Пользователя добавьте в проект, а таже прикрепите к пользователю свой ssh-ключ.

### Терраформим сервера

1. Заполните в файле `terraform/_config.tf`
  * `ACCOUNT_ID` - ваш аккаунт Селектела
  * `PROJ_ID` - ID проекта
  * `USER` - имя созданного пользователя
  * `PASSWORD` - пароль созданного пользователя
  * `network01-id` - ID публичной сети проекта
  * `main01-public-ip` - внешний IP-адрес главного сервера из публичной сети (из публичной сети `\29` доступно 5 адресов, самая простая мнемоника, если вам выдали сеть 5.189.236.216/29, то первый адрес CIDR + 2, то есть 5.189.236.218).
